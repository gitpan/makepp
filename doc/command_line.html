<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Makepp command line options</title>
  </head>

  <body>
    <h1>Makepp command line options</h1>

    <p><i>Makepp</i> supports most of the command line options and
    syntax that other makes support.  You can assign variables on the
    command line which will override any assignment in every Makefile
    loaded, e.g.,
<pre>
makepp CFLAGS=-O2
</pre>
    <p>As with other implementations of make, if you do not specify a
    target, the first target in the file which is not part of a pattern
    rule is invoked.</p>

    <p>Options include most of the standard make options, plus a few new
    ones.</p>

    <dl>
      <dt><code>-e</code> or <code>--environment-override</code>
      <dd>
	Causes variables from the environment to override definitions
	in the makefile.  By default, variables are taken from the
	environment only if they are not specified in the makefile.

      <dt><code>-C</code> or <code>--directory=dirname</code>
      <dd>
	Cd to the given directory before trying to build the targets.
	This is more or less equivalent to specifying a directory with
	<code>-F</code>, except that if the directory does not exist yet
	but does exist in a <a href="repositories.html">repository</a>,
	<code>-F</code> will make the directory whereas <code>-C</code>
	won't.

      <dt><code>-f</code>&nbsp;<i>Makefile</i> or <code>--file=Makefile</code> or  <code>--makefile=Makefile</code>
      <dd>
	Uses the specified makefile.  If you do not specify the
	<code>-f</code> option, <i>makepp</i> looks first for a file in
	the current directory called <code>Makeppfile</code>, then
	<code>makefile</code>, then <code>Makefile</code>.</code>

      <dt><code>-F</code>&nbsp;<i>Makefile</i> or <code>--makeppfile=Makefile</code>
      <dd>
	Uses the specified makefile, and cd's to the directory
	containing the Makefile before running the make command.  If you
	specify a directory instead of a Makefile, cd's to the directory
	and then searches for <code>Makeppfile</code>,
	<code>makefile</code>, and <code>Makefile</code>.

	<p>This option can be useful if you execute <i>makepp</i> from
	unpredictable directories.  For example, if you compile from
	within emacs and you have sources scattered all over your
	directory tree, the current working directory for the
	compilation command will be the directory the last source file
	you edited was in, which may or may not be the top level
	directory for your compilation.  However, you can specify your
	compilation command as
<pre>
makepp -F /your/source/dir/top
</pre>
	and this will work no matter what your current directory is.</p>

      <dt><code>-h</code> or <code>--help</code>
      <dd>
	Print out a brief summary of the options.

	<a name="option_j"></a>
      <dt><code>-j</code> or <code>--jobs=n</code>
      <dd>
	Interprets the next word as the number of shell commands that
	can be executed in parallel.  By default, <code>makepp</code>
	does not execute commands in parallel.

	<p>Unlike some other versions of make, when jobs are executed in
	parallel, <i>makepp</i> directs their output to a file and only
	displays the output when the commands have finished.  This
	prevents output from several different commands from being mixed
	together on the display, but it does mean that you might have to
	wait a little longer to see the output.</p>

	<a name="option_keep_going"></a>
      <dt><code>-k</code> or <code>--keep-going</code>
      <dd>
	Build as many files as possible, even if some of them have
	errors.  By default, <i>makepp</i> stops when it encounters the
	first error, even if there are other files that need to be built
	that don't depend on the erroneous file.

      <dt><code>--log=logfilename</code>
      <dd>
	Changes the name of the log file to the indicated name.  By
	default, the log file is called <code>.makepp_log</code>.

	<a name="option_no_implicit_load"></a>
      <dt><code>--noimplicit-load</code>
      <dd>
	Don't automatically load makefiles from directories referenced.
	By default, <i>makepp</i> automatically loads a makefile from
	any directory that contains a dependency of some target it needs
	to build, and from any directory that is scanned by a wildcard.
	Sometimes, however, this causes a problem, since makefiles need
	to be loaded with different command line varaibles or options,
	and if they are implicitly loaded before they are explicitly
	loaded by a recursive make invocation or the
	<code>load_makefile</code> statement, <i>makepp</i> aborts with
	an error.

	<a name="option_signature_method"></a>
      <dt><code>-m</code> or <code>--signature-method=</code>value
      <dd>
	Specifies the default signature method to use for rules which do
	not have the <code>:signature</code> modifier.  Possible values
	are <code>target_newer</code> (only requires that the target be
	newer than the dependencies; this is the default for the
	traditional make program) and <code>exact_match</code> (requires
	that the build command and signatures of all dependencies be
	exactly the same as on the last build; this is the default for
	<i>makepp</i>).

	<a name="option_nolog"></a>
      <dt><code>--nolog</code>
      <dd>
	Don't bother writing a detailed description of what was done to
	the log file.  By default, <i>makepp</i> writes out an
	explanation of every file that it tried to build, and why it
	built it or did not build it, to a file called
	<code>.makepp_log</code>.  This can be extremely valuable for
	debugging a makefile--<i>makepp</i> tells you what it thought
	all of the dependencies were, and which one(s) it thought
	changed.  However, it does take some extra CPU time, and you
	might not want to bother.

	<a name="noremake_makefiles"></a>
      <dt><code>--noremake-makefiles<code>
      <dd>
	Ordinarily, <i>makepp</i> loads each makefile in, then looks to
	see whether there is a rule that specifies how to update the
	makefile.  If there is, and the makefile needs to be rebuilt,
	the command is executed, and the makefile is reread.  This often
	causes problems with makefiles produced for the standard unix
	make utility, because (in my experience) often the make rules
	for updating makefiles are inaccurate--they frequently omit
	targets which are modified.  This can cause <i>makepp</i> to
	remake a lot of files unnecessarily.  You can often solve this
	problem by simply preventing <i>makepp</i> from updating the
	makefile automatically (but you have to remember to update it by
	hand).

	<a name="option_nowarn"></a>
      <dt><code>--nowarn</code>
      <dd>
	Don't print any warning messages.  Most warning messages are
	about constructs that you might see in legacy makefiles that
	<i>makepp</i> considers dangerous, but a few of them concern
	possible errors in your makefile.

	<a name="option_percent_subdirs"></a>
      <dt><code>--percent-subdirs</code>
      <dd>
	By default, % in a pattern rule (not in the
	<code>$(patsubst&nbsp;)</code> function) matches only the
	filename, not a directory.  In other words, %.c matches only
	*.c.  If you want %.c to match **/*.c, specify this option.

      <dt><code>-q</code> or <code>--quiet</code>
      <dd>
	Don't print informational messages like "Scanning xyz.h" or
	"Loading makefile /users/src/bob/funproject/Makefile".

	<a name="option_R"></a>
      <dt><code>-R</code> or <code>--repository=dir</code>
      <dd>
	Specify the given directory as a <a
	href="repositories.html">repository</a>.  Repositories are added
	in the order specified on the command line, so the first one you
	specify has precedence.  All files in the directory (and all its
	subdirectories) are automatically and temporarily linked to the
	current directory (and subdirectories) if they are needed.

	<p>If you just specify a directory after <code>-R</code>, its
	contents are linked into the current directory.  You can link
	its contents into any arbitrary place in the file system by
	specifying the location before an equals sign, e.g,
	<code>-R&nbsp;subdir1/subdir2=/users/joe/joes_nifty_library</code>.</p>

	<a name="option_traditional_recursive_make"></a>
      <dt><code>--traditional-recursive-make</code>
      <dd>
	This option is present to allow <i>makepp</i> to work with old
	makefiles that use recursive make extensively.  By default,
	recursive make is implemented by a subprocess that communicates
	with the parent process; the build is actually done by the
	parent process.  This allows some of <i>makepp</i>'s nice
	features like repositories to work with recursive make
	invocations.  However, this technique will not work if you load
	more than one makefile from the same directory, or if you use
	different command line options on different invocations of
	recursive make.  The <code>--traditional-recursive-make</code>
	optionn makes <i>makepp</i> do recursive makes the same way as
	the traditional make, allowing more makefiles to work, but then
	repositories and parallel builds do not work properly.  Usually,
	<i>makepp</i> itself will tell you if you need this option.

      <dt><code>-v</code> or <code>--verbose</code>
      <dd>
	Verbose mode.  Explains what it is trying to build, and why each
	file is being built.  This can be useful if you think a file is
	being rebuilt too often.

	<p>This option actually takes what would be written to the log
	file and displays it on the screen.</p>

    </dl>

    <hr>
    <a href="index.html">Table of contents</a>
    |
    <a href="dirs.html">Next (multiple directory builds)</a>
    |
    <a href="syntax_makefile.html">Previous (makefile syntax)</a>
    <br>

<!-- Created: Tue Aug  8 18:07:56 PDT 2000 -->
<!-- hhmts start -->
Last modified: Sat Oct 14 22:37:29 PDT 2000
<!-- hhmts end -->
  </body>
</html>
