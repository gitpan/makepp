###	SPAR <http://www.cpan.org/scripts/>
###	5	755	1067749983	1174084135	is_relevant.pl
#
# Test if unpacking managed to set the timestamp required by SIGNATURE.
#

(stat 'build_cache/small')[9] == 1103934737
###	10	664	1124224809	1174084132	Makeppfile
# This used to cause an error, so we should test that it works:
build_cache none

perl { use BuildCacheControl }

# Cache entries have no \n, to avoid DOS headaches.
# The --size option used to be messed up, so check for that:
$(phony default):
	&clean --size +10 build_cache
	perl { chdir 'build_cache'; -f 'small' && !-e 'big' && !-e 'corrupt' && !-e 'none' && !-e 'wrong' or die }
###	D	755	1148062992	1103934737	build_cache
###	D	755	1148062992	1103934737	build_cache/.makepp
###	-1	644	1148062992	1103934737	build_cache/big
This file is too big to survive a cleaning.
###	-2	644	1148062992	1173968421	build_cache/.makepp/big.mk
SIGNATURE=1103934737,43
END=
###	0	644	1148062992	1103934737	build_cache/corrupt
###	1	644	1148062992	1173968421	build_cache/.makepp/corrupt.mk
SIGNATURE=1103934737,0
###	1	644	1148062992	1103934737	build_cache/none
no info
###	-1	644	1148062992	1103934737	build_cache/small
OK
###	-2	644	1148062992	1173968388	build_cache/.makepp/small.mk
SIGNATURE=1103934737,2
END=
###	0	644	1148062992	1103934737	build_cache/wrong
###	-2	644	1148062992	1173968388	build_cache/.makepp/wrong.mk
SIGNATURE=wrong
END=
